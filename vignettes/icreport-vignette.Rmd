---
title: "Visualizing ICA results with R package icreport"
author: "Jin-Hyun Ju"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\usepackage[utf8]{inputenc}
---

The `icreport` package provides functions that perform independent component analysis on a given data set and can subsequently generate a compact report. 

## Quick Start

If you already know what you want to use the package for, follow this simple example to get started!

1) Installing the package through the function ```{install_github}``` from the package ```{devtools}```

```{r Install icreport, eval = FALSE}
install.package("devtools") # in case you don't have devtools already

devtools::install_github("jinhyunju/icreport") #installing icreport

```

2) Installing and loading an example dataset that is available through bioconductor.

- Here we are going to use the bladderbatch dataset that was introduced in the sva tutorial. (link to sva tutorial)

- You can use your own dataset, it just needs to be a matrix which has the dimension of gene x samples

```{r Install golub dataset, eval = FALSE}
source("http://bioconductor.org/biocLite.R")
biocLite("golubEsets")
```


```{r Install bladder batch, eval = FALSE}
source("http://bioconductor.org/biocLite.R")
biocLite("bladderbatch")
```


```{r Load golub}
library(golubEsets)
data(Golub_Merge)

info.df <- pData(Golub_Merge)    # dimensions 57 x 4 (57 samples, 4 features) is the info.df 
expr <- exprs(Golub_Merge)     # dimensions 22283 x 57 (22283 probes, 57 samples)

check.covars <- c("ALL.AML","T.B.cell","Gender","Source")
#info.df$batch <- as.factor(info.df$batch) #changing the numerical column into factors


```

```{r Load bladder batch, eval = FALSE, echo= FALSE }
library(bladderbatch)
data(bladderdata)

info.df <- pData(bladderEset)    # dimensions 57 x 4 (57 samples, 4 features) is the info.df 
expr <- exprs(bladderEset)     # dimensions 22283 x 57 (22283 probes, 57 samples)


info.df$batch <- as.factor(info.df$batch) #changing the numerical column into factors
check.covars <- c("batch","outcome")

```

2) Running ICA on the expression dataset. 

```{r Run ICA, eval = FALSE}
library(icreport)
ica_result <- gene_expr_ica(phenotype.mx = expr, info.df = info.df, check.covars = check.covars)

```

3) Creating a report file in the current working directory

- prefix specifies the name of the html report file. 


```{r ICA report, eval = FALSE}
ic_report(ica.result = ica_result, prefix = "ICA_Report")
```


4) Generating a PCA report file 

```{r PCA report, eval = FALSE}

pc_report(phenotype.mx = expr, info.df = info.df, check.covars = check.covars,prefix = "Golub_PCA" )

```

Gene expression analyses with RNA sequencing or microarray produce extremely high dimensional datasets containing approximately 20,000 or more features per sample. Inspecting such large datasets is no easy task. Heatmaps or Principal Component Analysis (PCA) are commonly used for visual representation of the data to reveal any hidden structures. Independent component analysis (ICA) is a method that can give us valuable insight about the hidden structure of the data. 

